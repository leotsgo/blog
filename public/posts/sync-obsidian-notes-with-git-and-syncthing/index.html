<!doctype html><html lang=en><head><title>Sync Obsidian Notes With Git And Syncthing Â· leotsgo
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Leonardo Bermejo"><meta name=description content="Taking notes and building my Zettelkasten is becoming an increasingly crucial part of my life. I&rsquo;m able to reflect on how I&rsquo;m feeling and what I&rsquo;m learning, making connections I wouldn&rsquo;t otherwise.
One important aspect of notetaking is being able to take notes on multiple devices wherever I am. In this article, I&rsquo;ll explain how I set up the integration between my devices using Git and Syncthing.

  The Problem
  
    
    Link to heading
  

As of 2024 the Obsidian Git Plugin support git integration on Android, but only via https. As I&rsquo;m using a private Github repository to store my notes, I did not feel comfortable storing a access key on my smartphone. So how could I sync my notes then ?"><meta name=keywords content="blog,developer,personal,devops"><meta name=fediverse:creator content><meta name=twitter:card content="summary"><meta name=twitter:title content="Sync Obsidian Notes With Git And Syncthing"><meta name=twitter:description content="Taking notes and building my Zettelkasten is becoming an increasingly crucial part of my life. Iâ€™m able to reflect on how Iâ€™m feeling and what Iâ€™m learning, making connections I wouldnâ€™t otherwise.
One important aspect of notetaking is being able to take notes on multiple devices wherever I am. In this article, Iâ€™ll explain how I set up the integration between my devices using Git and Syncthing.
The Problem Link to heading As of 2024 the Obsidian Git Plugin support git integration on Android, but only via https. As Iâ€™m using a private Github repository to store my notes, I did not feel comfortable storing a access key on my smartphone. So how could I sync my notes then ?"><meta property="og:url" content="https://www.leotsgo.dev/posts/sync-obsidian-notes-with-git-and-syncthing/"><meta property="og:site_name" content="leotsgo"><meta property="og:title" content="Sync Obsidian Notes With Git And Syncthing"><meta property="og:description" content="Taking notes and building my Zettelkasten is becoming an increasingly crucial part of my life. Iâ€™m able to reflect on how Iâ€™m feeling and what Iâ€™m learning, making connections I wouldnâ€™t otherwise.
One important aspect of notetaking is being able to take notes on multiple devices wherever I am. In this article, Iâ€™ll explain how I set up the integration between my devices using Git and Syncthing.
The Problem Link to heading As of 2024 the Obsidian Git Plugin support git integration on Android, but only via https. As Iâ€™m using a private Github repository to store my notes, I did not feel comfortable storing a access key on my smartphone. So how could I sync my notes then ?"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-21T00:00:00+00:00"><meta property="article:modified_time" content="2024-09-21T00:00:00+00:00"><meta property="article:tag" content="Zettelkasten"><meta property="article:tag" content="Homelab"><link rel=canonical href=https://www.leotsgo.dev/posts/sync-obsidian-notes-with-git-and-syncthing/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.07092c1350ffd254998dc43a44ae96e617d14af4df4602626878df89189c5e1a.css integrity="sha256-BwksE1D/0lSZjcQ6RK6W5hfRSvTfRgJiaHjfiRicXho=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.ico sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://www.leotsgo.dev/>leotsgo
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/now/>Now</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/contact/>Contact me</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=/pt-br/posts/sincronizando-notas-obsidian-git-syncthing/>ðŸ‡§ðŸ‡·</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://www.leotsgo.dev/posts/sync-obsidian-notes-with-git-and-syncthing/>Sync Obsidian Notes With Git And Syncthing</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2024-09-21T00:00:00Z>September 21, 2024
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
3-minute read</span></div><div class=authors><i class="fa-solid fa-user" aria-hidden=true></i>
<a href=/authors/leonardo-bermejo/>Leonardo Bermejo</a></div><div class=categories><i class="fa-solid fa-folder" aria-hidden=true></i>
<a href=/categories/tech/>Tech</a></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/zettelkasten/>Zettelkasten</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/homelab/>Homelab</a></span></div></div></header><div class=post-content><p>Taking notes and building my Zettelkasten is becoming an increasingly crucial part of my life. I&rsquo;m able to reflect on how I&rsquo;m feeling and what I&rsquo;m learning, making connections I wouldn&rsquo;t otherwise.</p><p>One important aspect of notetaking is being able to take notes on multiple devices wherever I am. In this article, I&rsquo;ll explain how I set up the integration between my devices using Git and Syncthing.</p><h1 id=the-problem>The Problem
<a class=heading-link href=#the-problem><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>As of 2024 the Obsidian Git Plugin support git integration on Android, but <a href=https://www.reddit.com/r/ObsidianMD/comments/17odzjb/obsidian_android_syncing_via_github_in_2023/ class=external-link target=_blank rel=noopener>only via https</a>. As I&rsquo;m using a private Github repository to store my notes, I did not feel comfortable storing a access key on my smartphone. So how could I sync my notes then ?</p><h1 id=the-solution>The Solution
<a class=heading-link href=#the-solution><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>I had a small RaspberryPi clone at home, an OrangePi Zero 3. What if I could have a directory in my phone in sync with a directory on my OrangePi ? Then I would just have to automate the commit and push process and all my notes would ever be in sync!</p><h1 id=how-to>How To
<a class=heading-link href=#how-to><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>To set this up, I&rsquo;ll assume you already have git configured on your machine and <a href=https://syncthing.net/ class=external-link target=_blank rel=noopener>Syncthing</a> installed. After installation, we have to make sure Syncthing is going to run as a <a href=https://docs.syncthing.net/users/autostart.html#how-to-set-up-a-system-service class=external-link target=_blank rel=noopener>system service</a>, not a user service under systemd:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl <span class=nb>enable</span> syncthing@myuser.service
</span></span><span class=line><span class=cl>systemctl start syncthing@myuser.service
</span></span></code></pre></div><p>Where <strong>myuser</strong> is the name of a user on your machine. After this you just have to use Syncthing&rsquo;s GUI to enable the synchronization. I won&rsquo;t go into the details of this step because there are <a href=https://medium.com/linuxforeveryone/how-to-sync-all-your-stuff-with-syncthing-linux-android-guide-536fe61d68df class=external-link target=_blank rel=noopener>millions of tutorials</a> out there teaching how to use the WebGUI to set the sync up.</p><p>With the sync up and running, we need a script that will be used by our systemd service. This little script pulls from github and commits and push any modifications I made on the repository using my phone:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /home/youruser/sb
</span></span><span class=line><span class=cl>git pull
</span></span><span class=line><span class=cl>git add --all
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;manual backup: </span><span class=k>$(</span>date <span class=s1>&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>git push
</span></span></code></pre></div><p>I placed this script in my user&rsquo;s home under the name <strong>sync.sh</strong>. Give it permission to be executed by running the following command:
<code>chmod +x sync.sh</code></p><p>Now we just have to set the systemd service and the systemd timer. In my case, I run this script every minute, but you may want to use a different frequency.</p><p>Go to <code>/etc/systemd/system</code> and create two files - <code>syncsb.service</code> and <code>syncsb.timer</code>. The names don&rsquo;t matter as long as you are consistent with the names in the files. The service will be responsible for running the script, and it will be triggered by the timer:</p><p>syncsb.service:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>Unit<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Description</span><span class=o>=</span>Sync my notes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Service<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Type</span><span class=o>=</span>simple
</span></span><span class=line><span class=cl><span class=nv>User</span><span class=o>=</span>myuser
</span></span><span class=line><span class=cl><span class=nv>Environment</span><span class=o>=</span><span class=nv>HOME</span><span class=o>=</span>/home/myuser
</span></span><span class=line><span class=cl><span class=nv>WorkingDirectory</span><span class=o>=</span>/home/myuser/notes-repository
</span></span><span class=line><span class=cl><span class=nv>ExecStart</span><span class=o>=</span>/home/myuser/sync.sh
</span></span><span class=line><span class=cl><span class=nv>Restart</span><span class=o>=</span>on-failure
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Install<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>WantedBy</span><span class=o>=</span>default.target
</span></span></code></pre></div><p>It&rsquo;s important to set the user correctly or the script might not have the privileges to run git commands.</p><p>syncsb.timer:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>Unit<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Description</span><span class=o>=</span>Sync notes every minute
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Timer<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>OnUnitActiveSec</span><span class=o>=</span>1min
</span></span><span class=line><span class=cl><span class=nv>Unit</span><span class=o>=</span>syncsb.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Install<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>WantedBy</span><span class=o>=</span>timers.target
</span></span></code></pre></div><p>The <strong>Unit</strong> here must have the same name of your service.</p><p>With the files in place you just have to run the following commands:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Reload the daemon so the new files are read</span>
</span></span><span class=line><span class=cl>sudo systemctl daemon-reload
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># enable and start the services:</span>
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> syncsb.timer
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> syncsb.service
</span></span><span class=line><span class=cl>sudo systemctl start syncsb.timer
</span></span></code></pre></div><p>And done! Now every modification you make on the notes on a device will be synced with your phone and vice-versa. Just be careful to not edit a file in multiple devices before the sync runs.</p></div><footer></footer></article></section></div><footer class=footer><section class=container>Â©
2024
Leonardo Bermejo
Â·
Licensed under <a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA-4.0</a>
Â·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>